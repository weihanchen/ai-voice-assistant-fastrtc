# AI èªéŸ³åŠ©ç†å°ˆæ¡ˆè¦åŠƒæ–¹æ¡ˆ

## å°ˆæ¡ˆæ¦‚è¿°

| é …ç›® | å…§å®¹ |
|------|------|
| **å°ˆæ¡ˆåç¨±** | AI Voice Assistant (FastRTC) |
| **æŠ€è¡“æ£§** | Python 3.13 / uv / FastRTC / OpenAI API / LangGraph / Gradio / Docker |
| **é–‹ç™¼æ–¹æ³•** | Spec-Driven Development (GitHub Spec-Kit) |

---

## ä¸€ã€æ¶æ§‹è¨­è¨ˆ

### 1.1 åŸºç¤æ¶æ§‹ï¼ˆPhase 1-5 å·²å®Œæˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Gradio WebRTC UI                      â”‚
â”‚                  (å…§å»ºæ–¼ FastRTC)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ Audio Stream
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FastRTC Stream                         â”‚
â”‚              (ReplyOnPause Handler)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   ASR   â”‚  â”‚   LLM    â”‚  â”‚   TTS   â”‚
   â”‚ Whisper â”‚  â”‚ ChatGPT  â”‚  â”‚ Kokoro  â”‚
   â”‚ (ä¸­æ–‡)  â”‚  â”‚  + Tools â”‚  â”‚ (ä¸­æ–‡)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼            â–¼            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å¤©æ°£API â”‚  â”‚ åŒ¯ç‡API â”‚  â”‚ è‚¡åƒ¹API â”‚
   â”‚  (å…è²») â”‚  â”‚  (å…è²») â”‚  â”‚  (å…è²») â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 LangGraph æµç¨‹æ¶æ§‹ï¼ˆPhase 6 å·²å®Œæˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangGraph æµç¨‹è·¯ç”±                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  [START] â”€â”€â–¶ æ„åœ–åˆ†é¡ â”€â”€â”¬â”€â”€â–¶ å¤©æ°£æŸ¥è©¢ (Tool) â”€â”€â–¶ [END]          â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â”œâ”€â”€â–¶ åŒ¯ç‡æŸ¥è©¢ (Tool) â”€â”€â–¶ [END]          â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â”œâ”€â”€â–¶ è‚¡ç¥¨æŸ¥è©¢ (Tool) â”€â”€â–¶ [END]          â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â””â”€â”€â–¶ æ—…éŠè¦åŠƒ (SubGraph) â”€â”€â–¶ [END]      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ—…éŠè¦åŠƒå­æµç¨‹ (SubGraph)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [é€²å…¥] â”€â”€â–¶ è§£æç›®çš„åœ° â”€â”€â–¶ æŸ¥è©¢å¤©æ°£ â”€â”€â–¶ è©•ä¼°å¤©æ°£               â”‚
â”‚                                          â”‚                      â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                â”‚
â”‚                                  é©åˆ         ä¸é©åˆ             â”‚
â”‚                                    â”‚            â”‚                â”‚
â”‚                                    â–¼            â–¼                â”‚
â”‚                              ç”¢ç”Ÿæ¨è–¦      å»ºè­°å‚™æ¡ˆ              â”‚
â”‚                                    â”‚            â”‚                â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                          â–¼                      â”‚
â”‚                                    å›æ‡‰ä½¿ç”¨è€… â”€â”€â–¶ [é›¢é–‹]        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å¤šä»£ç†å”ä½œæ¶æ§‹ï¼ˆPhase 7 è¦åŠƒä¸­ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Multi-Agent å”ä½œæµç¨‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [START] â”€â”€â–¶ Supervisor Agent â”€â”€â–¶ ä»»å‹™æ‹†è§£èˆ‡åˆ†æ´¾               â”‚
â”‚                     â”‚                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â–¼           â–¼           â–¼           â–¼                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚ Weather â”‚ â”‚ Finance â”‚ â”‚ Travel  â”‚ â”‚ General â”‚            â”‚
â”‚    â”‚  Agent  â”‚ â”‚  Agent  â”‚ â”‚  Agent  â”‚ â”‚  Agent  â”‚            â”‚
â”‚    â”‚ (å¤©æ°£)  â”‚ â”‚(åŒ¯ç‡+è‚¡)â”‚ â”‚ (æ—…éŠ)  â”‚ â”‚ (é–’èŠ)  â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â”‚
â”‚         â”‚           â”‚           â”‚           â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                           â–¼                                     â”‚
â”‚                    Aggregatorï¼ˆå½™æ•´çµæœï¼‰                        â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚                      [END] å›æ‡‰ä½¿ç”¨è€…                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹é»ï¼š
â€¢ ä¸€æ¬¡è«‹æ±‚å¯è§¸ç™¼å¤šå€‹ Agent ä¸¦è¡Œå”ä½œ
â€¢ å„ Agent é‡ç”¨ç¾æœ‰ Toolï¼ˆä¸é‡å¯«ï¼‰
â€¢ Supervisor è² è²¬ä»»å‹™æ‹†è§£èˆ‡çµæœå½™æ•´
```

---

## äºŒã€æŠ€è¡“é¸å‹

| å±¤ç´š | æŠ€è¡“é¸æ“‡ | èªªæ˜ |
|------|----------|------|
| **å¥—ä»¶ç®¡ç†** | uv + venv | å¿«é€Ÿã€ç¾ä»£åŒ–çš„ Python å¥—ä»¶ç®¡ç† |
| **å®¹å™¨åŒ–** | Docker + Compose v2 | ä¸€è‡´çš„é–‹ç™¼/éƒ¨ç½²ç’°å¢ƒ |
| **èªéŸ³è¼¸å…¥ (ASR)** | faster-whisper (small) | æœ¬åœ° CPU æ¨ç†ï¼Œæ”¯æ´ä¸­æ–‡ |
| **èªéŸ³è¼¸å‡º (TTS)** | Kokoro (kokoro + misaki[zh]) | æœ¬åœ° CPU æ¨ç†ï¼Œä¸­æ–‡æ¨¡å‹ |
| **LLM** | OpenAI GPT-4o-mini | æ”¯æ´ function callingï¼Œæˆæœ¬ä½ |
| **æµç¨‹ç·¨æ’** | LangGraph | ç‹€æ…‹æ©Ÿæµç¨‹ã€è¦–è¦ºåŒ–ã€å¯æ“´å±• |
| **UI** | Gradio (FastRTC å…§å»º) | ä¸€è¡Œå•Ÿå‹• WebRTC UI |
| **å¤–éƒ¨ API** | å…è²»å…¬é–‹ API | è©³è¦‹ä¸‹æ–¹ |

### å¤–éƒ¨ API é¸æ“‡

| åŠŸèƒ½ | API | èªªæ˜ |
|------|-----|------|
| **å¤©æ°£** | [Open-Meteo](https://open-meteo.com/) | å…è²»ï¼Œç„¡éœ€ API Key |
| **åŒ¯ç‡** | [ExchangeRate-API](https://www.exchangerate-api.com/) | å…è²»æ–¹æ¡ˆ 1,500 æ¬¡/æœˆï¼Œæ”¯æ´ TWD |
| **è‚¡åƒ¹** | [yfinance](https://pypi.org/project/yfinance/) | å…è²» Python å¥—ä»¶ |

---

## ä¸‰ã€Specs è¦æ ¼çµæ§‹

### ç¸½è¦½

| ç·¨è™Ÿ | Spec åç¨± | é¡å‹ | ç‹€æ…‹ | èªªæ˜ |
|------|-----------|------|------|------|
| **000** | `ai-voice-assistant` | æ ¸å¿ƒæ¶æ§‹ | âœ… å®Œæˆ | å°ˆæ¡ˆéª¨æ¶ã€LLM æ•´åˆã€Tool æ¡†æ¶ |
| **001** | `fastrtc-voice-pipeline` | åŠŸèƒ½æ¨¡çµ„ | âœ… å®Œæˆ | FastRTC + ASR + TTS èªéŸ³ç®¡ç·š |
| **002** | `weather-query` | Tool | âœ… å®Œæˆ | å¤©æ°£æŸ¥è©¢å·¥å…· |
| **003** | `exchange-rate-query` | Tool | âœ… å®Œæˆ | åŒ¯ç‡æ›ç®—å·¥å…· |
| **004** | `stock-price-query` | Tool | âœ… å®Œæˆ | è‚¡åƒ¹æŸ¥è©¢å·¥å…· |
| **005** | `realtime-conversation-ui` | UI å¢å¼· | âœ… å®Œæˆ | å³æ™‚å°è©±é¡¯ç¤ºä»‹é¢ |
| **006** | `langgraph-travel-flow` | æµç¨‹ç·¨æ’ | âœ… å®Œæˆ | LangGraph æ—…éŠè¦åŠƒæµç¨‹ |
| **007** | `multi-agent-collaboration` | å¤šä»£ç† | ğŸ“‹ è¦åŠƒä¸­ | å¤šä»£ç†å”ä½œç³»çµ± |

### å„ Spec è¦æ ¼ç¯„åœ

#### 000 - AI Voice Assistant (æ ¸å¿ƒæ¶æ§‹)

- å°ˆæ¡ˆç›®æ¨™èˆ‡ä½¿ç”¨è€…æ•…äº‹
- èƒ½åŠ›ç¯„åœèˆ‡é™åˆ¶
- éåŠŸèƒ½éœ€æ±‚ (å»¶é²ã€å¯é æ€§)
- LLM Client èˆ‡ Tool Registry æ¶æ§‹è¨­è¨ˆ
- è³‡æ–™çµæ§‹å®šç¾© (ToolResultã€ChatMessage)
- æ­¤éšæ®µä¸¦éå®Œæ•´åŠŸèƒ½å¯¦ä½œï¼Œ åƒ…å°ˆæ¡ˆèƒ½å¤ é•·å‡ºéª¨æ¶ä¸¦å•Ÿå‹•ç‚ºåŸå‰‡

#### 001 - FastRTC Voice Pipeline (èªéŸ³ç®¡ç·š)

- FastRTC èªéŸ³ç®¡ç·šï¼Œæ•´åˆ faster-whisper ASR èˆ‡ Kokoro TTSï¼ˆä¸­æ–‡ï¼‰
- ASR/TTS éœ€æ±‚èˆ‡å“è³ªæ¨™æº–
- ReplyOnPause è¡Œç‚ºå®šç¾©ï¼ˆ0.5 ç§’åœé “é–¾å€¼ï¼‰
- faster-whisper/Kokoro é…ç½®éœ€æ±‚
- Gradio UI æ•´åˆéœ€æ±‚

#### 002 - Weather Query (å¤©æ°£æŸ¥è©¢)

- ä½¿ç”¨è€…æ•…äº‹èˆ‡æŸ¥è©¢æƒ…å¢ƒ
- æ”¯æ´åŸå¸‚ç¯„åœèˆ‡åç¨±æ¨™æº–åŒ–
- Open-Meteo API æ•´åˆéœ€æ±‚
- éŒ¯èª¤è™•ç†èˆ‡æˆåŠŸæŒ‡æ¨™

#### 003 - Exchange Rate Query (åŒ¯ç‡æŸ¥è©¢)

- ä½¿ç”¨è€…æ•…äº‹èˆ‡æ›ç®—æƒ…å¢ƒ
- æ”¯æ´è²¨å¹£ç¨®é¡èˆ‡ä»£ç¢¼æ¨™æº–åŒ–
- ExchangeRate-API æ•´åˆéœ€æ±‚
- æ›ç®—é‚è¼¯èˆ‡æˆåŠŸæŒ‡æ¨™

#### 004 - Stock Price Query (è‚¡åƒ¹æŸ¥è©¢)

- ä½¿ç”¨è€…æ•…äº‹èˆ‡æŸ¥è©¢æƒ…å¢ƒ
- æ”¯æ´å¸‚å ´ (å°è‚¡/ç¾è‚¡)
- yfinance æ•´åˆéœ€æ±‚
- è‚¡ç¥¨åç¨±å°æ‡‰èˆ‡æˆåŠŸæŒ‡æ¨™

#### 005 - Realtime Conversation UI (å³æ™‚å°è©±é¡¯ç¤º)

- ä½¿ç”¨è€…æ•…äº‹ï¼šå³æ™‚æŸ¥çœ‹èªéŸ³è¾¨è­˜èˆ‡å›æ‡‰æ–‡å­—
- å°è©±æ­·å²é¡¯ç¤ºå€ï¼ˆé¡ä¼¼èŠå¤©ä»‹é¢ï¼‰
- ç•¶å‰ç‹€æ…‹æŒ‡ç¤ºï¼ˆé–’ç½®/è†è¯/è™•ç†ä¸­/å›æ‡‰ä¸­ï¼‰
- ASR è¾¨è­˜æ–‡å­—å³æ™‚é¡¯ç¤º
- AI å›æ‡‰æ–‡å­—å³æ™‚é¡¯ç¤º
- èˆ‡ç¾æœ‰ Gradio WebRTC UI æ•´åˆ

#### 006 - LangGraph Travel Flow (æ—…éŠè¦åŠƒæµç¨‹)

- **ç›®æ¨™**ï¼šå±•ç¤º LangGraph æµç¨‹ç·¨æ’èƒ½åŠ›ï¼ŒåŒæ™‚ä¿ç•™ç¾æœ‰ Tool åŠŸèƒ½
- **æ ¸å¿ƒåŠŸèƒ½**ï¼š
  - LangGraph StateGraph æ•´åˆ
  - æ„åœ–åˆ†é¡è·¯ç”±ï¼ˆå¤©æ°£/åŒ¯ç‡/è‚¡ç¥¨/æ—…éŠï¼‰
  - æ—…éŠè¦åŠƒå¤šæ­¥é©Ÿæµç¨‹ï¼ˆSubGraphï¼‰
  - æµç¨‹è¦–è¦ºåŒ–è¼¸å‡ºï¼ˆMermaid åœ–ï¼‰
- **æ—…éŠè¦åŠƒæµç¨‹**ï¼š
  - è§£æç›®çš„åœ°åŸå¸‚
  - æŸ¥è©¢ç›®çš„åœ°å¤©æ°£ï¼ˆæ•´åˆç¾æœ‰ WeatherToolï¼‰
  - æ ¹æ“šå¤©æ°£æ¢ä»¶åˆ†æ”¯ï¼šé©åˆå‡ºéŠ vs å»ºè­°å‚™æ¡ˆ
  - ç”¢ç”Ÿæ—…éŠå»ºè­°å›æ‡‰
- **è¨­è¨ˆåŸå‰‡**ï¼š
  - 100% ä¿ç•™ç¾æœ‰ Tool åŠŸèƒ½
  - å¢é‡å¼å¼•å…¥ LangGraph
  - æ¸…æ¥šå°æ¯” Tool vs Flow çš„ä½¿ç”¨æ™‚æ©Ÿ

#### 007 - Multi-Agent Collaboration (å¤šä»£ç†å”ä½œ)

- **ç›®æ¨™**ï¼šå±•ç¤ºå¤šä»£ç†å”ä½œèƒ½åŠ›ï¼Œå¯¦ç¾è¤‡é›œä»»å‹™çš„è‡ªå‹•æ‹†è§£èˆ‡ä¸¦è¡Œè™•ç†
- **æ ¸å¿ƒåŠŸèƒ½**ï¼š
  - Supervisor Agentï¼šä»»å‹™ç†è§£ã€æ‹†è§£ã€åˆ†æ´¾èˆ‡çµæœå½™æ•´
  - å°ˆå®¶ Agent ç¾¤ï¼šWeather / Finance / Travel / General
  - Agent é–“é€šè¨Šå”å®šèˆ‡ç‹€æ…‹ç®¡ç†
  - ä¸¦è¡ŒåŸ·è¡Œèˆ‡çµæœèšåˆ
- **Demo å ´æ™¯**ï¼š
  - æ™ºæ…§æ—…éŠè¦åŠƒï¼šã€Œæˆ‘ä¸‹é€±æƒ³å»å°ä¸­ç©ã€â†’ åŒæ™‚æŸ¥å¤©æ°£ + è¦åŠƒè¡Œç¨‹
  - å€‹äººè²¡å‹™åŠ©ç†ï¼šã€ŒæŸ¥å°ç©é›»è‚¡åƒ¹å’Œç¾é‡‘åŒ¯ç‡ã€â†’ ä¸¦è¡ŒæŸ¥è©¢å…©å€‹è³‡è¨Š
  - å‡ºå·®è¡Œç¨‹åŠ©ç†ï¼šã€Œå¾Œå¤©å»æ±äº¬å‡ºå·®ã€â†’ å¤©æ°£ + åŒ¯ç‡ + æ³¨æ„äº‹é …
- **è¨­è¨ˆåŸå‰‡**ï¼š
  - 100% ä¿ç•™ç¾æœ‰æµç¨‹ï¼ˆ006 çš„ main_router ä¸å‹•ï¼‰
  - é‡ç”¨æ‰€æœ‰ç¾æœ‰ Toolï¼ˆAgent åªæ˜¯åŒ…è£å±¤ï¼‰
  - å¯é€éè¨­å®šåˆ‡æ›æµç¨‹æ¨¡å¼ï¼ˆtools / langgraph / multi_agentï¼‰

---

## å››ã€ç›®éŒ„çµæ§‹

```
ai-voice-assistant-fastrtc/
â”œâ”€â”€ .specify/                    # Spec-Kit é…ç½®
â”œâ”€â”€ specs/                       # è¦æ ¼æ–‡ä»¶ (ç”± spec-kit ç”Ÿæˆ)
â”œâ”€â”€ src/
â”‚   â””â”€â”€ voice_assistant/
â”‚       â”œâ”€â”€ main.py              # å…¥å£é» (FastRTC Stream)
â”‚       â”œâ”€â”€ config.py            # ç’°å¢ƒè®Šæ•¸é…ç½®
â”‚       â”œâ”€â”€ llm/                 # LLM å®¢æˆ¶ç«¯æ¨¡çµ„
â”‚       â”œâ”€â”€ tools/               # æŸ¥è©¢å·¥å…·æ¨¡çµ„
â”‚       â”œâ”€â”€ flows/               # LangGraph æµç¨‹æ¨¡çµ„ (006)
â”‚       â”‚   â”œâ”€â”€ state.py         # FlowState å®šç¾©
â”‚       â”‚   â”œâ”€â”€ graphs/          # æµç¨‹åœ–
â”‚       â”‚   â”‚   â”œâ”€â”€ main_router.py    # ä¸»è·¯ç”±æµç¨‹
â”‚       â”‚   â”‚   â””â”€â”€ travel_planner.py # æ—…éŠè¦åŠƒå­æµç¨‹
â”‚       â”‚   â””â”€â”€ nodes/           # æµç¨‹ç¯€é»
â”‚       â”œâ”€â”€ agents/              # ğŸ†• å¤šä»£ç†æ¨¡çµ„ (007)
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ base.py          # Agent åŸºåº•é¡åˆ¥
â”‚       â”‚   â”œâ”€â”€ supervisor.py    # Supervisor Agent
â”‚       â”‚   â”œâ”€â”€ weather.py       # Weather Agent
â”‚       â”‚   â”œâ”€â”€ finance.py       # Finance Agent (åŒ¯ç‡+è‚¡ç¥¨)
â”‚       â”‚   â”œâ”€â”€ travel.py        # Travel Agent
â”‚       â”‚   â””â”€â”€ graph.py         # å¤šä»£ç†å”ä½œæµç¨‹åœ–
â”‚       â””â”€â”€ voice/               # èªéŸ³ç®¡ç·šæ¨¡çµ„
â”œâ”€â”€ tests/
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ compose.yaml
â”œâ”€â”€ pyproject.toml
â””â”€â”€ .env.example
```

---

## äº”ã€é–‹ç™¼æµç¨‹èˆ‡éšæ®µ

### Spec-Kit æ¨™æº–æµç¨‹

æ¯å€‹ Spec ä¾åºåŸ·è¡Œï¼š

```
/speckit.specify  â†’  æ’°å¯« spec.md (å®šç¾© What & Why)
        â†“
/speckit.plan     â†’  æ’°å¯« plan.md (å®šç¾© How)
        â†“
/speckit.tasks    â†’  æ’°å¯« tasks.md (æ‹†è§£å¯åŸ·è¡Œä»»å‹™)
        â†“
/speckit.implement â†’  é€ä¸€å¯¦ä½œä»»å‹™
```

### é–‹ç™¼é †åº

```
000 æ ¸å¿ƒæ¶æ§‹        âœ…
 â†“
001 èªéŸ³ç®¡ç·š        âœ…
 â†“
002 å¤©æ°£ â”€â”
003 åŒ¯ç‡ â”€â”¼â”€ âœ… (å¯ä¸¦è¡Œé–‹ç™¼)
004 è‚¡åƒ¹ â”€â”˜
 â†“
005 å³æ™‚å°è©± UI     âœ…
 â†“
æ•´åˆæ¸¬è©¦            âœ…
 â†“
006 LangGraph æµç¨‹  âœ…
 â†“
007 å¤šä»£ç†å”ä½œ      ğŸ“‹ è¦åŠƒä¸­
```

### Phase å°æ‡‰

| Phase | å°æ‡‰ Spec | ç”¢å‡º | ç‹€æ…‹ |
|-------|-----------|------|------|
| **Phase 0** | 000 (éƒ¨åˆ†) | ç’°å¢ƒå»ºç½®ã€pyproject.toml | âœ… å®Œæˆ |
| **Phase 1** | 001 | FastRTC + ASR + TTS åŸºæœ¬å°è©± | âœ… å®Œæˆ |
| **Phase 2** | 000 (å®Œæˆ) | LLM Client + Tool Registry | âœ… å®Œæˆ |
| **Phase 3** | 002, 003, 004 | ä¸‰å€‹æŸ¥è©¢å·¥å…· | âœ… å®Œæˆ |
| **Phase 4** | - | ç«¯å°ç«¯æ•´åˆæ¸¬è©¦ | âœ… å®Œæˆ |
| **Phase 5** | 005 | å³æ™‚å°è©± UI é¡¯ç¤º | âœ… å®Œæˆ |
| **Phase 6** | 006 | LangGraph æµç¨‹ç·¨æ’ + æ—…éŠè¦åŠƒ | âœ… å®Œæˆ |
| **Phase 7** | 007 | å¤šä»£ç†å”ä½œç³»çµ± | ğŸ“‹ è¦åŠƒä¸­ |

### æ•™å­¸æ–‡ç« å°æ‡‰

æœ¬å°ˆæ¡ˆè¨­è¨ˆç‚ºæ¼¸é€²å¼æ•™å­¸ç¯„ä¾‹ï¼Œå„ç¯‡ç« å°æ‡‰ä¸åŒæ¶æ§‹å±¤ç´šï¼š

| ç¯‡ç«  | ä¸»é¡Œ | å°æ‡‰ Spec | æ ¸å¿ƒæ¦‚å¿µ |
|------|------|-----------|----------|
| **ç¬¬ä¸€ç¯‡** | æ¨™æº– Tool å‘¼å« | 000-004 | LLM + Function Calling |
| **ç¬¬äºŒç¯‡** | LangGraph Flow | 006 | StateGraph + æ„åœ–è·¯ç”± + SubGraph |
| **ç¬¬ä¸‰ç¯‡** | å¤šä»£ç†å”ä½œ | 007 | Supervisor + å°ˆå®¶ Agent + ä¸¦è¡Œè™•ç† |

**åˆ‡æ›æ¨¡å¼**ï¼ˆè¦åŠƒä¸­ï¼‰ï¼š
```python
# .env æˆ– config.py
FLOW_MODE = "tools"        # ç¬¬ä¸€ç¯‡ï¼šç´” Tool å‘¼å«
FLOW_MODE = "langgraph"    # ç¬¬äºŒç¯‡ï¼šLangGraph æµç¨‹
FLOW_MODE = "multi_agent"  # ç¬¬ä¸‰ç¯‡ï¼šå¤šä»£ç†å”ä½œ
```

---

## å…­ã€å¿«é€Ÿé–‹å§‹

### 1. åˆå§‹åŒ–å°ˆæ¡ˆç’°å¢ƒ

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
uv venv
.venv\Scripts\activate  # Windows
# source .venv/bin/activate  # Linux/Mac

# å®‰è£ spec-kit CLI
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git

# åˆå§‹åŒ– spec-kit
specify init . --ai claude
```

### 2. åŸ·è¡Œ Spec-Kit æµç¨‹

```bash
# åœ¨ Claude Code ä¸­ä¾åºåŸ·è¡Œï¼š
/speckit.constitution    # å®šç¾©å°ˆæ¡ˆåŸå‰‡
/speckit.specify         # æ’°å¯«éœ€æ±‚è¦æ ¼
/speckit.plan            # æŠ€è¡“è¨ˆç•«
/speckit.tasks           # ç”Ÿæˆä»»å‹™
/speckit.implement       # é–‹å§‹å¯¦ä½œ
```

### 3. Docker å•Ÿå‹• (ç”Ÿç”¢ç’°å¢ƒ)

```bash
# ä½¿ç”¨ Docker Compose v2 å•Ÿå‹•
docker compose up -d

# æŸ¥çœ‹æ—¥èªŒ
docker compose logs -f

# åœæ­¢æœå‹™
docker compose down
```

---

## ä¸ƒã€Docker é…ç½®ç¯„ä¾‹

### Dockerfile

```dockerfile
FROM python:3.13-slim

WORKDIR /app

# å®‰è£ç³»çµ±ä¾è³´ (éŸ³è¨Šè™•ç†æ‰€éœ€)
RUN apt-get update && apt-get install -y \
    ffmpeg \
    libsndfile1 \
    && rm -rf /var/lib/apt/lists/*

# å®‰è£ uv
COPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv

# è¤‡è£½å°ˆæ¡ˆæª”æ¡ˆ
COPY pyproject.toml uv.lock ./
RUN uv sync --frozen --no-dev

COPY src/ ./src/

# æš´éœ² Gradio é è¨­åŸ 
EXPOSE 7860

# å•Ÿå‹•æ‡‰ç”¨
CMD ["uv", "run", "python", "-m", "voice_assistant.main"]
```

### compose.yaml

```yaml
services:
  voice-assistant:
    build: .
    ports:
      - "7860:7860"
    env_file:
      - .env
    environment:
      - GRADIO_SERVER_NAME=0.0.0.0
    volumes:
      - ./src:/app/src:ro  # é–‹ç™¼æ™‚ç†±è¼‰å…¥ (å¯é¸)
    restart: unless-stopped
```

---

## å…«ã€åƒè€ƒè³‡æº

### æ ¸å¿ƒæ¡†æ¶

- [GitHub Spec-Kit](https://github.com/github/spec-kit) - è¦æ ¼é©…å‹•é–‹ç™¼å·¥å…·
- [Spec-Driven Development ä»‹ç´¹](https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/)
- [FastRTC å®˜ç¶²](https://fastrtc.org/) - å¯¦æ™‚é€šè¨Šæ¡†æ¶
- [FastRTC GitHub](https://github.com/gradio-app/fastrtc) - åŸå§‹ç¢¼èˆ‡ç¯„ä¾‹

### LangGraph æµç¨‹ç·¨æ’

- [LangGraph å®˜æ–¹æ–‡ä»¶](https://langchain-ai.github.io/langgraph/) - æµç¨‹ç·¨æ’æ¡†æ¶
- [LangGraph Workflows and Agents](https://docs.langchain.com/oss/python/langgraph/workflows-agents) - å·¥ä½œæµèˆ‡ä»£ç†è¨­è¨ˆ
- [LangGraph Visualization](https://kitemetric.com/blogs/visualizing-langgraph-workflows-with-get-graph) - æµç¨‹è¦–è¦ºåŒ–

### å¤–éƒ¨ API

- [Open-Meteo API](https://open-meteo.com/) - å¤©æ°£ API
- [ExchangeRate-API](https://www.exchangerate-api.com/) - åŒ¯ç‡ API (æ”¯æ´ TWD)
- [yfinance](https://pypi.org/project/yfinance/) - è‚¡åƒ¹æŸ¥è©¢å¥—ä»¶

### éƒ¨ç½²å·¥å…·

- [Docker Compose v2](https://docs.docker.com/compose/) - å®¹å™¨ç·¨æ’å·¥å…·
